---
import Layout from '../layouts/Layout.astro'
import Header from '../layouts/Header.astro'
import Heading from '../layouts/Heading.astro'
import Luce from '../layouts/Luce.astro'
import Servicios from '../layouts/Servicios.astro'
import Productos from '../layouts/Productos.astro'
import Encuentranos from '../layouts/Encuentranos.astro'
import PideCita from '../layouts/PideCita.astro'
import OfertaEspecial from '../layouts/OfertaEspecial.astro'
import Footer from '../layouts/Footer.astro'

import '../styles/styles.css'
---

<Layout>
  <Header />
  <Heading />
  <Luce />
  <Servicios />
  <!-- <Productos /> -->
  <Encuentranos />
  <OfertaEspecial />
  <PideCita />
  <Footer />
</Layout>

<script>
  function addObserver(el: HTMLElement | null, className: string) {
    if (!el) return

    const observer = new IntersectionObserver((entries, observer) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add(className)
          observer.unobserve(entry.target)
        }
      })
    })
    observer.observe(el)
  }

  const sections = [...document.getElementsByTagName('section')]

  sections.forEach((section) => {
    section?.classList.add('opacity-0')
    addObserver(section, 'slideUp')
  })
</script>
